# 📐 中文网文书写规范

**所有章节创作必须严格遵守本规范。不符合规范的章节将无法通过审核。**

---

## 📂 1. 文件命名规范

### 强制格式
```
chapter-{序号}.md
```

### 规则
- 序号固定**4位数字**,不足补零 (0001-9999)
- 使用**连字符** `-` 而非下划线
- 纯**英文小写**

### 示例

✅ **正确**:
```
chapter-0001.md
chapter-0002.md
chapter-0047.md
chapter-0123.md
chapter-1000.md
```

❌ **错误**:
```
ch0001.md         # 禁止缩写
第一章.md         # 禁止中文
chapter-1.md      # 缺少前导零
chapter-01.md     # 不足4位
chapter-001.md    # 不足4位
chapter_0001.md   # 使用下划线
Chapter-0001.md   # 使用大写
```

---

## 📖 2. 章节标题格式

### Markdown内部标题

#### 强制格式
```markdown
# 第{N}章 {章节名}
```

#### 规则
- 必须使用**一级标题** `#`
- 格式: `第{阿拉伯数字}章 {标题文字}`
- 章节序号使用**阿拉伯数字**,不用汉字
- 禁止使用"集"、"回"、"节"等其他单位
- 标题与正文之间**空一行**

#### 示例

✅ **正确**:
```markdown
# 第1章 废柴少年
# 第47章 天剑宗大比
# 第120章 突破筑基
```

❌ **错误**:
```markdown
# 第一章 废柴少年        # 禁止汉字数字
# 第1集 废柴少年         # 禁止"集"
# Chapter 1: 废柴少年    # 禁止英文
# 1. 废柴少年            # 缺少"第X章"
## 第1章 废柴少年        # 禁止二级标题
#第1章 废柴少年          # 缺少空格
```

---

## 📋 3. YAML Frontmatter 规范

> **模板参考**: `templates/chapter-template.md`

### 标准格式

```yaml
---
chapter: 1                          # 章节序号
title: "{章节标题}"                  # 章节标题(纯文字,不含"第X章")
volume: 1                           # 所属卷号
summary: "{本章核心事件}"            # 与大纲速览表一致
hook: "{章末悬念}"                   # 与大纲章末钩子一致
characters:                         # 出场人物列表
  - "{角色1}"
  - "{角色2}"
status: draft                       # 状态枚举
---
```

### 字段说明

| 字段 | 必填 | 说明 | 核对来源 |
|------|------|------|----------|
| `chapter` | ✅ | 章节序号 | - |
| `title` | ✅ | 章节标题 | 大纲.章节速览.标题 |
| `volume` | ✅ | 所属卷号 | 大纲.卷号 |
| `summary` | ✅ | 本章核心事件 | 大纲.章节速览.核心事件 |
| `hook` | ✅ | 章末悬念 | 大纲.详细章节.章末钩子 |
| `characters` | ✅ | 出场人物列表 | 大纲.章节速览.出场人物 |
| `status` | ✅ | 章节状态 | - |

### status 枚举值

| 值 | 含义 | 设置者 | 下一步操作 |
|-----|------|--------|------------|
| `draft` | 初稿完成，等待首次审核 | chapter-writer | chapter-auditor 审核 |
| `pending` | 审核发现问题，等待修订 | chapter-auditor | revision-writer 修订 |
| `revised` | 修订完成，等待复审 | revision-writer | chapter-auditor 复审 |
| `final` | 审核通过，可发布 | chapter-auditor | format-exporter 导出 |

### 状态流转图

```
                    ┌─────────────────────┐
                    ▼                     │
draft ──审核──> final                     │
          │                               │
          └──> pending ──修订──> revised ──复审──> final
                  ▲                   │
                  └───────────────────┘
                    (复审仍有问题)
```

### 设计要点

1. **精简字段** - 只保留 7 个核心字段，便于核对
2. **与大纲对应** - summary/hook/characters 直接对应大纲速览表
3. **状态枚举** - status 有明确的值和转换规则
4. **字数自动统计** - word_count 已移除，由审核脚本自动统计

### 已移除的字段

以下字段不再写入章节 YAML（信息在大纲中已有或由脚本自动统计）：

| 已移除字段 | 原因 |
|------------|------|
| `word_count` | 审核时脚本自动统计 |
| `notes` | 大纲详细章节已有创作备注 |
| `foreshadowing` | 大纲伏笔规划已有 |
| `characters_appeared` | 改用 `characters` |
| `first_appearances` | 大纲"新实体"规划已有 |
| `new_entities` | 大纲"新实体"规划已有 |
| `next_chapter_preview` | 蓝图大纲已有下章梗概 |
| `style_notes` | 蓝图有风格指南，项目级一致 |
| `character_notes` | 简化后合并到 `notes` |
| 卷级元数据 | 在大纲中管理 |

---

## ✍️ 4. 正文结构规范

### 标准章节结构

```markdown
---
chapter: 1
title: "废柴少年"
volume: 1
summary: "主角被欺凌，引出身世之谜"
hook: "神秘声音响起：「你愿意签订契约吗？」"
characters:
  - 萧羽
  - 李傲天
status: draft
---

# 第1章 废柴少年

天剑宗,外门广场。

"萧羽,你这个废物!"李傲天冷笑道。

少年面色平静,拳头却紧紧握起。

三年前,他还是宗门第一天才...
```

### 结构说明
- **YAML头**: 7个核心字段，与大纲速览表对应
- **正文**: 纯粹的章节内容
- **无需工作区**: notes/foreshadowing等信息已在大纲中管理

### 导出规则
- `format-exporter` 只导出 YAML 后的正文部分
- YAML 中的元数据不会出现在导出文件中

---

## 💬 5. 对话格式规范

### 标准格式

✅ **正确**:
```markdown
"住手!"萧羽怒喝道。

"你是谁?"少年警惕地问道。

李傲天冷笑:"区区废物,也敢挑战我?"

萧羽深吸一口气,缓缓说道:"三年了,你欺我辱我。今日,
我要让你知道,谁才是真正的废物!"
```

❌ **错误**:
```markdown
"住手!" 萧羽怒喝道。      # 感叹号后有空格
'你是谁?'少年问道。        # 使用单引号
李傲天冷笑:区区废物。      # 缺少引号
"住手！" 萧羽怒喝道        # 中英混用标点+空格
```

### 规则
1. 统一使用**中文引号** `""`
2. 对话标签可前可后,但**同一章内保持一致**
3. 感叹号/问号与引号之间**无空格**
4. 长对话可换行,但引号内不断开
5. 对话与叙述之间用逗号或冒号连接

### 对话标签位置

**后置**(推荐):
```markdown
"住手!"萧羽怒喝道。
"你是谁?"少年警惕地问道。
```

**前置**:
```markdown
萧羽怒喝道:"住手!"
少年警惕地问道:"你是谁?"
```

**混合**:
```markdown
李傲天冷笑:"区区废物。"说罢,转身离去。
```

---

## 📌 6. 标点符号规范

### 必须遵守

✅ **中文标点** (强制):
```
， 。 ！ ？ ： ； " " ' ' … —
```

❌ **禁止英文标点**:
```
, . ! ? : ; " " ' ' ... -
```

### 特殊情况

✅ **数字/英文/专有名词中**:
```markdown
3.5倍
HP值
Level 10
API接口
```

### 省略号规范

✅ **正确** (六点省略号):
```markdown
"这……"
他沉默了……
```

❌ **错误**:
```markdown
"这..."        # 三个点
"这。。。"     # 句号
"这......"     # 六个点
```

### 破折号规范

✅ **正确** (长破折号):
```markdown
三年——整整三年!
他望向远方——那是家的方向。
```

❌ **错误**:
```markdown
三年--整整三年!      # 双短横线
三年-整整三年!       # 单短横线
```

---

## 🔢 7. 数字使用规范

### 使用阿拉伯数字

✅ **正确**:
```markdown
- 年龄: 18岁
- 境界: 炼气期3层
- 数量: 获得100颗丹药, 10000灵石
- 时间: 3年前, 5分钟后, 第7天
- 距离: 10米外, 500里之遥
- 倍数: 3.5倍, 10倍速
```

### 使用汉字数字

✅ **正确**:
```markdown
- 成语/固定搭配: 一无所有, 三头六臂, 十全十美
- 概数: 数十人, 几百里, 成千上万
- 序数词(除章节): 第一名, 三大宗门, 五大家族
- 强调语气: 一剑, 一掌, 一拳
```

### 禁止混用

❌ **错误**:
```markdown
3大宗门           # 应为"三大宗门"
第一百二十三章    # 应为"第123章"
五千万           # 建议"5000万"(大数用阿拉伯)
```

---

## 📐 8. 段落与排版规范

### 段落间距

✅ **正确**:
```markdown
段落之间空一行。

新段落从这里开始。
```

❌ **错误**:
```markdown
段落之间不空行。
新段落从这里开始。
```

❌ **错误**:
```markdown
段落之间空多行。


新段落从这里开始。
```

### 具体要求
1. 段落间**空一行**(一个空行)
2. **不使用缩进**(Markdown会自动处理)
3. 每段不超过**200字**(便于阅读)
4. 对话**独立成段**

### 段落示例

✅ **正确**:
```markdown
天剑宗,外门广场。

"萧羽,你这个废物!"李傲天冷笑道。

少年面色平静,拳头却紧紧握起。三年前,他还是宗门第一天才,无数人仰慕。而今,却沦为人人嘲笑的废物。

"是吗?"萧羽淡淡开口。

李傲天一愣,随即狂笑:"哈哈哈,废物也敢顶嘴?"
```

---

## 🎯 9. 常见错误示例

### 错误1: 标题格式不规范

❌ **错误**:
```markdown
## 第一章:废柴少年        # 二级标题+汉字数字+冒号
第1章 废柴少年            # 缺少#
# 第1集 废柴少年          # 使用"集"
```

✅ **正确**:
```markdown
# 第1章 废柴少年
```

### 错误2: 标点符号混用

❌ **错误**:
```markdown
"住手!" 萧羽怒喝道.       # 英文句号
李傲天冷笑道："住手！"   # 中英引号混用
```

✅ **正确**:
```markdown
"住手!"萧羽怒喝道。
李傲天冷笑道:"住手!"
```

### 错误3: 数字使用不当

❌ **错误**:
```markdown
3大宗门
五千万灵石
第一百章
```

✅ **正确**:
```markdown
三大宗门
5000万灵石
第100章
```

### 错误4: 段落格式错误

❌ **错误**:
```markdown
天剑宗,外门广场。
"萧羽,你这个废物!"李傲天冷笑道。
少年面色平静。
```

✅ **正确**:
```markdown
天剑宗,外门广场。

"萧羽,你这个废物!"李傲天冷笑道。

少年面色平静。
```

---

## ✅ 10. 规范检查清单

创作完成后,请自查:

- [ ] 文件名: `chapter-{0001}.md` 格式
- [ ] 标题: `# 第{N}章 {标题}` 格式
- [ ] Frontmatter: 包含7个必填字段 (chapter/title/volume/summary/hook/characters/status)
- [ ] summary: 与大纲速览表核心事件一致
- [ ] characters: 与大纲速览表出场人物一致
- [ ] hook: 与大纲详细章节章末钩子一致
- [ ] 对话: 使用中文引号 `""`
- [ ] 标点: 全部中文标点
- [ ] 数字: 年龄/境界/数量用阿拉伯,成语/序数词用汉字
- [ ] 段落: 空一行分隔
- [ ] 省略号: 使用 `…` 而非 `...`
- [ ] 无英文标点

---

## 🔧 自动化检查

本系统的`chapter-auditor` Agent会自动检查以上规范,不合规的章节将被标记为需要修改。

`consistency-checker` Skill会在批量创作后自动运行,检查跨章一致性。

---

## 📞 反馈

如有规范相关问题,请在项目Issue中提出。

---

**严格遵守本规范,是保证小说质量的基础!**
